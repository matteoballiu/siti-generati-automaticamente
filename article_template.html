<!DOCTYPE html>
<html>
<head>
    <title>{{ titolo }}</title>
    <meta name="keywords" content="{{ keywords }}">
    <!-- Nuovi Font da Google Fonts: Poppins (Titoli, 800 per più impatto) e Inter (Corpo, 400-600 per leggibilità) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome per le icone social -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #007bff; /* Blu brillante per il brand, leggermente più vivace */
            --secondary-color: #2c3e50; /* Blu scuro/antracite per il testo principale */
            --accent-color: #28a745; /* Verde per elementi interattivi e highlights */
            --background-light: #f5f8fa; /* Sfondo generale molto chiaro e pulito */
            --text-dark: #34495e; /* Grigio-blu scuro per il testo del corpo */
            --card-background: #ffffff; /* Sfondo delle card/container */
            --border-color: #e9ecef; /* Colore del bordo molto sottile */
            
            /* Nuove variabili per ombre più raffinate */
            --shadow-subtle: rgba(0, 0, 0, 0.03); /* Ombra appena percettibile */
            --shadow-soft: rgba(0, 0, 0, 0.06); /* Ombra leggera per elementi */
            --shadow-medium: rgba(0, 0, 0, 0.12); /* Ombra standard per elevazione */
            --shadow-strong: rgba(0, 0, 0, 0.20); /* Ombra più scura per hover/prominenza */
            
            --footer-bg: #212529; /* Sfondo footer scuro */
            --footer-text: #ced4da; /* Testo footer grigio chiaro */
            --transition-speed: 0.3s; /* Velocità standard per le transizioni, leggermente più veloce */
            --border-radius-main: 12px; /* Raggio del bordo per container principali, ridotto */
            --border-radius-card: 10px; /* Raggio del bordo per card interne, ridotto */

            /* Colori brand specifici per i social media (COERENTI CON LA HOME) */
            --facebook-color: #3b5998;
            --instagram-color: #E4405F; 
            --google-color: #DB4437; 
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            line-height: 1.55; /* Interlinea ulteriormente ridotta per compattezza */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .article-container {
            max-width: 800px; /* Larghezza leggermente aumentata per migliore proporzione */
            margin: 35px auto;
            padding: 35px 45px;
            background-color: var(--card-background);
            border-radius: var(--border-radius-main);
            box-shadow: 0 12px 25px var(--shadow-medium);
            text-align: center;
            flex-grow: 1;
            transition: box-shadow var(--transition-speed) ease-out, transform var(--transition-speed) ease-out;
        }
        .article-container:hover {
            box-shadow: 0 18px 35px var(--shadow-strong);
            transform: translateY(-3px);
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 2.4em; /* Ridotto per equilibrio */
            letter-spacing: -0.02em;
            text-shadow: 0.5px 0.5px 1.5px var(--shadow-subtle);
        }

        h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 35px; 
            font-size: 1.5em; /* Ridotto per equilibrio */
            line-height: 1.25;
            text-shadow: 0.5px 0.5px 1px var(--shadow-subtle);
        }

        .article-image { /* Immagine principale dell'articolo (sotto h1/h2) */
            max-width: 80%; /* RIDOTTO: Immagine principale più piccola e centrata */
            height: auto;
            display: block;
            margin: 0 auto 40px auto; /* Margine ridotto e centrato */
            border-radius: var(--border-radius-card);
            box-shadow: 0 6px 15px var(--shadow-medium);
            transition: transform var(--transition-speed) ease-out, box-shadow var(--transition-speed) ease-out;
        }
        .article-image:hover {
            transform: scale(1.001);
            box-shadow: 0 8px 20px var(--shadow-strong);
        }

        /* Nuovo contenitore per il layout a due colonne del corpo dell'articolo */
        .article-body-layout {
            display: flex;
            flex-wrap: wrap; 
            gap: 25px; /* Spazio ridotto tra le colonne */
            align-items: flex-start;
            text-align: left;
        }

        .article-content { /* Contenuto principale dell'articolo */
            flex: 2; /* Prende 2/3 dello spazio */
            min-width: 280px; /* Larghezza minima per la colonna del testo */
            font-size: 0.9em; 
            color: var(--text-dark);
            padding: 0; 
            line-height: 1.6; 
        }
        .article-content p {
            margin-bottom: 0.9em; 
        }
        .article-content h1, .article-content h2, .article-content h3 {
            font-family: 'Poppins', sans-serif;
            color: var(--secondary-color);
            text-shadow: 0.5px 0.5px 1px var(--shadow-subtle);
            text-align: left; 
            margin-top: 1.2em; /* Spazio ridotto prima delle intestazioni */
            margin-bottom: 0.5em; /* Spazio ridotto dopo le intestazioni */
            line-height: 1.2;
        }
        .article-content h1 { /* H1 interno generato dall'AI, trattato come H2 */
            font-size: 1.7em; /* Ridotto */
            font-weight: 700;
            color: var(--primary-color);
            text-align: left; 
        }
        .article-content h2 { /* H2 interno generato dall'AI, trattato come H3 */
            font-size: 1.3em; /* Ridotto */
            font-weight: 600;
        }
        .article-content h3 { /* H3 interno generato dall'AI, trattato come H4 */
            font-size: 1em; /* Ridotto */
            font-weight: 600;
            color: var(--accent-color);
            margin-top: 0.8em; /* Ridotto */
        }
        
        .article-sidebar-image-container { /* Nuova colonna per l'immagine laterale */
            flex: 1; /* Prende 1/3 dello spazio */
            min-width: 180px; /* Larghezza minima ridotta per la sidebar immagine */
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius-card);
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow-medium);
            transition: transform var(--transition-speed) ease-out, box-shadow var(--transition-speed) ease-out;
            align-self: flex-start; 
            margin-top: 0px; /* ALLINEAMENTO: Azzerato per l'allineamento perfetto con l'inizio del content */
            height: fit-content; /* L'altezza si adatta al contenuto dell'immagine */
        }
        .article-sidebar-image-container:hover {
            transform: scale(1.01);
            box-shadow: 0 8px 20px var(--shadow-strong);
        }
        .article-sidebar-image-container img {
            width: 100%;
            height: auto; /* Altezza si adatta per mantenere proporzioni con larghezza 100% */
            object-fit: contain; /* L'immagine si adatta al contenitore mantenendo le proporzioni */
            display: block;
            border-radius: 0;
            transition: transform var(--transition-speed) ease-out;
        }
        .article-sidebar-image-container:hover img {
            transform: scale(1.05);
        }

        .back-to-home {
            margin-top: 45px; /* Margine ridotto */
            padding-top: 18px; /* Padding ridotto */
            border-top: 1px solid var(--border-color);
        }
        .back-to-home a {
            background-color: var(--primary-color);
            color: var(--card-background);
            padding: 9px 20px; /* Padding ridotto */
            border-radius: 6px; /* Bordi ridotti */
            text-decoration: none;
            font-weight: 700;
            font-size: 0.85em; /* Dimensione ridotta */
            display: inline-block;
            transition: background-color var(--transition-speed) ease-in-out, transform var(--transition-speed) ease-in-out, box-shadow var(--transition-speed) ease-in-out;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        .back-to-home a:hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.2);
            text-decoration: none;
        }

        /* Footer Styles (Copied from home_template.html for consistency) */
        .site-footer {
            background-color: var(--footer-bg);
            color: var(--footer-text);
            padding: 35px 20px; 
            text-align: center;
            font-size: 0.8em; /* Ridotto per footer */
            margin-top: 50px; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .site-footer p {
            margin: 5px 0;
        }
        .site-footer a {
            color: var(--footer-text);
            text-decoration: none;
            transition: color var(--transition-speed) ease;
        }
        .site-footer a:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* Stili per i link social all'interno del footer (COPIA ESATTA DALLA HOME) */
        .footer-social-links { 
            margin-top: 18px; 
            margin-bottom: 18px; 
        }
        .footer-social-links a {
            display: inline-block;
            margin: 0 12px; 
            font-size: 1em; 
            color: inherit; 
            text-decoration: none;
            transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease;
            opacity: 0.8; 
        }
        /* Colori originali dei social media per le icone */
        .footer-social-links a.facebook-icon .fab.fa-facebook-f { color: var(--facebook-color); }
        .footer-social-links a.instagram-icon .fab.fa-instagram { color: var(--instagram-color); }
        .footer-social-links a.google-icon .fab.fa-google { color: var(--google-color); }

        .footer-social-links a:hover {
            transform: translateY(-2px); 
            opacity: 1; 
        }
        .footer-social-links .fab, .footer-social-links .fas { 
            font-size: 1.8em; 
            vertical-align: middle;
            margin: 0;
        }

        /* Responsiveness */
        @media (max-width: 1200px) { /* Desktop più piccoli / Laptop */
            .article-container { max-width: 750px; padding: 30px 40px; }
            h1 { font-size: 2.2em; }
            h2 { font-size: 1.3em; }
            .article-image { max-width: 90%; margin-bottom: 35px; } /* L'immagine principale potrebbe essere più grande su schermi medi */
            .article-body-layout { gap: 20px; } /* Riduci gap */
            .article-content { font-size: 0.85em; }
            .article-content h1 { font-size: 1.6em; }
            .article-content h2 { font-size: 1.2em; }
            .article-content h3 { font-size: 0.9em; }
            .article-sidebar-image-container { min-width: 160px; margin-top: 0; } /* Rimuovi margin-top su schermi più piccoli */
            .back-to-home { margin-top: 40px; padding-top: 15px; }
            .back-to-home a { padding: 8px 18px; font-size: 0.8em; }
            .site-footer { padding: 30px 15px; margin-top: 40px; }
            .footer-social-links a { margin: 0 10px; font-size: 0.9em; }
            .footer-social-links .fab, .footer-social-links .fas { font-size: 1.6em; }
        }

        @media (max-width: 992px) { /* Tablet */
            .article-container {
                margin: 25px auto;
                padding: 20px 25px;
            }
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.1em; margin-bottom: 30px; }
            .article-image { max-width: 100%; margin-bottom: 30px; } /* Torna al 100% su mobile */
            .article-body-layout { flex-direction: column; gap: 20px; } /* Impila le colonne */
            .article-content { flex: none; width: 100%; font-size: 0.8em; padding: 0; }
            .article-content h1 { font-size: 1.4em; }
            .article-content h2 { font-size: 1em; }
            .article-content h3 { font-size: 0.8em; }
            .article-sidebar-image-container { 
                flex: none; 
                width: 100%; 
                min-height: 180px; 
                align-self: center; 
                border-radius: var(--border-radius-card); 
                margin-top: 0; /* Assicurati che non ci sia margine extra quando impilata */
            }
            .article-sidebar-image-container:hover {
                transform: none; 
                box-shadow: 0 5px 15px var(--shadow-medium); 
            }
            .back-to-home { margin-top: 30px; padding-top: 12px; }
            .back-to-home a { padding: 5px 12px; font-size: 0.7em; }
            .site-footer { padding: 25px 10px; margin-top: 35px; }
            .footer-social-links a { margin: 0 8px; font-size: 0.9em; }
            .footer-social-links .fab, .footer-social-links .fas { font-size: 1.4em; }
        }

        @media (max-width: 768px) { /* Small tablet / Large mobile */
            .article-container { padding: 15px 10px; margin: 10px auto; }
            h1 { font-size: 1.4em; margin-bottom: 8px; }
            h2 { font-size: 0.9em; margin-bottom: 20px; }
            .article-image { margin-bottom: 25px; }
            .article-content { font-size: 0.7em; line-height: 1.3; padding: 0;}
            .article-content h1 { font-size: 1.2em; }
            .article-content h2 { font-size: 0.85em; }
            .article-content h3 { font-size: 0.75em; }
            .article-sidebar-image-container { min-height: 140px; }
            .back-to-home { margin-top: 20px; padding-top: 8px; }
            .back-to-home a { padding: 4px 10px; font-size: 0.65em; }
            .site-footer { padding: 20px 8px; margin-top: 25px; }
        }

        @media (max-width: 576px) { /* Mobile */
            h1 { font-size: 1.2em; }
            h2 { font-size: 0.8em; }
            .article-content h1 { font-size: 1.1em; }
            .article-content h2 { font-size: 0.75em; }
            .article-content h3 { font-size: 0.65em; }
            .article-sidebar-image-container { min-height: 100px; }
        }
    </style>
</head>
<body>
    <div class="article-container">
        <h1>{{ titolo }}</h1>
        <h2>{{ sottotitolo }}</h2>
        <img src="{{ img_url }}" alt="Immagine rappresentativa principale" class="article-image">
        
        <div class="article-body-layout"> {# Nuovo contenitore per layout a due colonne #}
            <div class="article-content">
                {{ contenuto | safe }}
            </div>
            {# Assicurati che 'sidebar_img_url' venga passato da run_automation.py #}
            {# Se non hai ancora implementato il passaggio di questa URL, usa un placeholder temporaneo #}
            <div class="article-sidebar-image-container">
                <img src="{{ sidebar_img_url if sidebar_img_url else '../placeholder_sidebar_image.jpeg' }}" 
                     alt="Immagine di contorno dell'articolo">
            </div>
        </div>
        
        <div class="back-to-home">
            <a href="index.html">&larr; Torna alla Home</a>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-social-links"> {# Social links section #}
            {% if footer_data.instagram_url %}
                <a href="{{ footer_data.instagram_url }}" target="_blank" rel="noopener noreferrer" class="instagram-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            {% endif %}
            {% if footer_data.facebook_url %}
                <a href="{{ footer_data.facebook_url }}" target="_blank" rel="noopener noreferrer" class="facebook-icon">
                    <i class="fab fa-facebook-f"></i>
                </a>
            {% endif %}
            {% if footer_data.google_mybusiness_url %}
                <a href="{{ footer_data.google_mybusiness_url }}" target="_blank" rel="noopener noreferrer" class="google-icon">
                    <i class="fab fa-google"></i>
                </a>
            {% endif %}
        </div>
        <p>&copy; {{ "now()|datetimeformat('%Y')" | safe }} {{ footer_data.nome_azienda }}</p>
        <p>P.IVA: {{ footer_data.partita_iva }}</p>
        <p>Indirizzo: {{ footer_data.indirizzo }}</p>
        <p>Telefono: {{ footer_data.telefono }}</p>
        <p>Email: <a href="mailto:{{ footer_data.email_azienda }}">{{ footer_data.email_azienda }}</a></p>
        <p><a href="{{ footer_data.cookie_policy_url }}">Cookie Policy</a></p>
    </footer>
</body>
</html>